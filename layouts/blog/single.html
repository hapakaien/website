{{ define "main" }}
  <main
    class="max-w-6xl mx-auto pb-4 lg:pb-6 px-4 xl:px-0 flex flex-col md:flex-row md:space-x-4"
  >
    <section class="flex-1">
      {{ partial "internal/image.html" (dict "src" .Params.image "alt" .Title "title" .Title "class" "object-cover w-full h-20 sm:h-80 duration-200 filter hover:hue-rotate-30 overflow-hidden relative") }}
      <article
        class="bg-white dark:bg-gray-800 sm:dark:bg-gray-700 sm:mx-4 mt-1 sm:-mt-48 sm:p-4 space-y-1 sm:space-y-0 relative"
      >
        <div class="space-y-1 text-sm md:text-base sm:mb-2">
          {{ range (.GetTerms "tag") }}
            <a
              href="{{ .RelPermalink }}"
              title="{{ .Title }}"
              class="bg-gray-100 dark:bg-gray-600 hover:bg-opacity-80 text-gray-700 dark:text-white px-1 inline-block hover:underline rounded"
            >
              {{ .Title }}
            </a>
          {{ end }}
        </div>
        <div class="prose md:prose-lg lg:prose-xl max-w-none">
          <header
            class="font-serif pb-2 border-b border-gray-200 dark:border-gray-600 prose__m-0"
          >
            <h1>{{ .Title }}</h1>
            <span class="font-sans text-sm md:text-base lg:text-lg">
              Published on
              {{ .Date.Format "Jan 2 2006" }}
            </span>
          </header>
          <section>
            {{ .Content }}
          </section>
        </div>
      </article>
      <section
        x-init="$watch('dark', (value) =>
          document.querySelector('iframe.giscus-frame').contentWindow.postMessage({
            giscus: {
              setConfig: {
                theme: value ? 'dark_dimmed' : 'light',
              },
            },
          }, 'https://giscus.app'),
        );"
        class="px-4 pt-4 border-t dark:border-0"
      >
        {{ partial "theme/comment/giscus.html" . }}
      </section>
    </section>
    <aside class="flex-none md:w-1/4 pt-3">
      {{- partial "theme/social-share.html" . -}}
      {{- partial "theme/toc.html" . -}}
    </aside>
  </main>
{{ end }}
